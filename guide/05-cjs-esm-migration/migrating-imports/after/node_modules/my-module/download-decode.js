async function downloadAndDecode(endpoint, format) {
  const decoder = await import(`./${format}.js`);
  const response = await fetch(`http://${endpoint}/${format}.dat`);
  const content = await response.text();
  return decoder.decode(content);
}

export { downloadAndDecode };