import { readFileSync } from 'node:fs';
import { dirname, join } from 'node:path';
import { fileURLToPath } from 'node:url';
// Create a require() function using the current module as parent for resolution.
import { createRequire } from 'node:module';
const require = createRequire(import.meta.url);

const __dirname = dirname(fileURLToPath(import.meta.url));

function readAndDecodeSync(format) {
  const decoder = require(`./${format}.js`);
  const filePath = join(__dirname, `${format}.dat`);
  const content = readFileSync(filePath, 'utf8');
  return decoder.decode(content);
}

export { readAndDecodeSync };