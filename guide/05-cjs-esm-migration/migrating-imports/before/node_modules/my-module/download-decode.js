async function downloadAndDecode(endpoint, format) {
  const decoder = require(`./${format}`);
  const response = await fetch(`http://${endpoint}/${format}.dat`);
  const content = await response.text();
  return decoder.decode(content);
}

exports.downloadAndDecode = downloadAndDecode;